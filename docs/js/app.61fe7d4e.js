(function(t){function i(i){for(var s,h,r=i[0],c=i[1],o=i[2],l=0,d=[];l<r.length;l++)h=r[l],Object.prototype.hasOwnProperty.call(n,h)&&n[h]&&d.push(n[h][0]),n[h]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(i);while(d.length)d.shift()();return a.push.apply(a,o||[]),e()}function e(){for(var t,i=0;i<a.length;i++){for(var e=a[i],s=!0,r=1;r<e.length;r++){var c=e[r];0!==n[c]&&(s=!1)}s&&(a.splice(i--,1),t=h(h.s=e[0]))}return t}var s={},n={app:0},a=[];function h(i){if(s[i])return s[i].exports;var e=s[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,h),e.l=!0,e.exports}h.m=t,h.c=s,h.d=function(t,i,e){h.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},h.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},h.t=function(t,i){if(1&i&&(t=h(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(h.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var s in t)h.d(e,s,function(i){return t[i]}.bind(null,s));return e},h.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return h.d(i,"a",i),i},h.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},h.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=i,r=r.slice();for(var o=0;o<r.length;o++)i(r[o]);var u=c;a.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("cd49")},"30c3":function(t,i,e){},bd35:function(t,i,e){"use strict";e("30c3")},cd49:function(t,i,e){"use strict";e.r(i);e("3440"),e("df4d"),e("dfb0"),e("8429");var s=e("ac81"),n=function(){var t=this,i=t._self._c;t._self._setupProxy;return i("div",{attrs:{id:"app"}},[i("canvas",{ref:"gameRef",staticClass:"app__game",style:t.gameCanvasStyle,attrs:{width:t.config.CANVAS_WIDTH,height:t.config.CANVAS_HEIGHT}})])},a=[],h=e("c79e"),r=e("98b7"),c=e("50cc"),o=e("81db"),u=e("0920"),l=e("2f76"),d=e("aef9"),f=e("2a26"),p=e("4712"),I=(e("ed1c"),e("6647"),e("f2e0"),e("e2b9"),e("c97a"),e("fca1"),function(){function t(){Object(c["a"])(this,t),this.FPS=120}return Object(o["a"])(t,[{key:"getFPS",value:function(){return this.FPS}},{key:"setFPS",value:function(t){this.FPS=t}}]),t}()),T=new I,g=T;function S(t,i){return Math.floor(Math.random()*(i-t+1))+t}function v(){return performance.now()}var H=e("0257"),C=Object(o["a"])((function t(){Object(c["a"])(this,t),t.image.src="sprite.png",Object(H["appendAsyncConstructor"])(this,Object(r["a"])(Object(h["a"])().mark((function i(){return Object(h["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,new Promise((function(i,e){t.image.onload=function(){return i()},t.image.onerror=function(){return e()}}));case 2:case"end":return i.stop()}}),i)}))))}));C.image=new Image;var m=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.remove=!1,this.cloudGap=S(t.config.MIN_CLOUD_GAP,t.config.MAX_CLOUD_GAP),this.X=M.config.CANVAS_WIDTH,this.Y=S(t.config.MAX_SKY_LEVEL,t.config.MIN_SKY_LEVEL),this.cloudGap=S(t.config.MIN_CLOUD_GAP,t.config.MAX_CLOUD_GAP),this.draw()}return Object(o["a"])(t,[{key:"draw",value:function(){this.canvasCtx.save(),this.canvasCtx.drawImage(C.image,t.sprite.X,t.sprite.Y,t.sprite.WIDTH,t.sprite.HEIGHT,this.X,this.Y,t.sprite.WIDTH,t.sprite.HEIGHT),this.canvasCtx.restore()}},{key:"update",value:function(t){this.isHide||(this.X-=Math.ceil(t),this.draw())}},{key:"isHide",get:function(){return this.X<-t.sprite.WIDTH}}]),t}();m.sprite={X:164,Y:2,WIDTH:96,HEIGHT:28},m.config={MAX_CLOUD_GAP:800,MAX_SKY_LEVEL:60,MIN_CLOUD_GAP:200,MIN_SKY_LEVEL:142};e("7d7f");var E=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.xPosList=[t.sprite.X,t.sprite.WIDTH],this.Y=254,this.spriteXPosList=[],this.bumpThreshold=.5,this.animationWidth=160,this.spriteXPosList=[t.sprite.X,t.sprite.X+t.sprite.WIDTH],this.bumpThreshold=.5,this.init()}return Object(o["a"])(t,[{key:"init",value:function(){this.canvasCtx.drawImage(C.image,this.spriteXPosList[0],t.sprite.Y,160,t.sprite.HEIGHT,this.xPosList[0],this.Y,160,t.sprite.HEIGHT)}},{key:"draw",value:function(){this.canvasCtx.drawImage(C.image,this.spriteXPosList[0],t.sprite.Y,t.sprite.WIDTH,t.sprite.HEIGHT,this.xPosList[0],this.Y,t.sprite.WIDTH,t.sprite.HEIGHT),this.canvasCtx.drawImage(C.image,this.spriteXPosList[1],t.sprite.Y,t.sprite.WIDTH,t.sprite.HEIGHT,this.xPosList[1],this.Y,t.sprite.WIDTH,t.sprite.HEIGHT)}},{key:"gameBoot",value:function(){this.canvasCtx.drawImage(C.image,this.spriteXPosList[0],t.sprite.Y,this.animationWidth,t.sprite.HEIGHT,this.xPosList[0],this.Y,this.animationWidth,t.sprite.HEIGHT),this.animationWidth+=50}},{key:"updateXPos",value:function(i,e){var s=i?0:1;this.xPosList[s]-=e,this.xPosList[i]=this.xPosList[s]+t.sprite.WIDTH,this.xPosList[s]<=-t.sprite.WIDTH&&(this.xPosList[s]+=2*t.sprite.WIDTH,this.xPosList[i]=this.xPosList[s]-t.sprite.WIDTH,this.spriteXPosList[s]=this.getRandomType()+t.sprite.X)}},{key:"update",value:function(t){var i=Math.floor(M.currentSpeed*(g.getFPS()/1e3)*t);this.updateXPos(Number(this.xPosList[0]<=0),i),this.draw()}},{key:"reset",value:function(){this.xPosList[0]=0,this.xPosList[1]=t.sprite.WIDTH}},{key:"getRandomType",value:function(){return Math.random()>this.bumpThreshold?t.sprite.WIDTH:0}}]),t}();E.sprite={X:0,Y:104,WIDTH:1200,HEIGHT:24};var A=new s["a"],_=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.cumulativeTime=0,this.X=M.config.CANVAS_WIDTH,this.Y=t.config.MIN_SKY_LEVEL}return Object(o["a"])(t,[{key:"draw",value:function(){this.canvasCtx.drawImage(C.image,t.sprite.X,t.sprite.Y,t.sprite.WIDTH,t.sprite.HEIGHT,this.X,this.Y,t.sprite.WIDTH,t.sprite.HEIGHT)}},{key:"update",value:function(i,e){this.cumulativeTime+=i,L.isNight&&(this.isHide&&(this.X=M.config.CANVAS_WIDTH),this.X-=e,this.draw()),this.cumulativeTime>=t.config.ALTERNATE_TIME&&this.isHide&&(A.$emit("alternate",!L.isNight),this.cumulativeTime=0)}},{key:"isHide",get:function(){return this.X<-t.sprite.WIDTH}}]),t}();_.sprite={X:1195,Y:2,WIDTH:39,HEIGHT:80},_.config={MAX_SKY_LEVEL:30,MIN_SKY_LEVEL:30,ALTERNATE_TIME:3e4};var Y=function(){function t(i,e){Object(c["a"])(this,t),this.canvasCtx=i,this.X=M.config.CANVAS_WIDTH,this.Y=S(t.config.MIN_SKY_LEVEL,t.config.MAX_SKY_LEVEL),e&&(this.X=e),this.sprite=t.spriteList[S(0,2)],this.draw()}return Object(o["a"])(t,[{key:"draw",value:function(){this.canvasCtx.save(),this.canvasCtx.drawImage(C.image,this.sprite.X,this.sprite.Y,this.sprite.WIDTH,this.sprite.HEIGHT,this.X,this.Y,this.sprite.WIDTH,this.sprite.HEIGHT),this.canvasCtx.restore()}},{key:"update",value:function(t){L.isNight&&!this.isHide&&(this.X-=t,this.draw())}},{key:"isHide",get:function(){return this.X<-this.sprite.WIDTH}}]),t}();Y.spriteList=[{X:1274,Y:2,WIDTH:20,HEIGHT:18},{X:1274,Y:20,WIDTH:20,HEIGHT:18},{X:1274,Y:38,WIDTH:20,HEIGHT:18}],Y.config={MAX_SKY_LEVEL:0,MIN_SKY_LEVEL:120,MIN_GAD:30};e("b763"),e("7889");var D=function(){function t(i,e,s,n){Object(c["a"])(this,t),this.X=i,this.Y=e,this.WIDTH=s,this.HEIGHT=n}return Object(o["a"])(t,[{key:"setPosition",value:function(t,i){this.X=t,this.Y=i}}]),t}(),N=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.currentSpriteIndex=0,this.dimensions={width:0,height:0},this.X=M.config.CANVAS_WIDTH,this.Y=0,this.isCactus=!1,this.cumulativeTime=0,this.kindCollisionBoxMap={CACTUS_SINGLE:[{XScale:1,YScale:24,width:14,height:38},{XScale:16,YScale:1,width:18,height:94},{XScale:36,YScale:20,width:14,height:40}],CACTUS_DOUBLE:[{XScale:1,YScale:24,width:14,height:38},{XScale:18,YScale:1,width:15,height:94},{XScale:36,YScale:10,width:30,height:50},{XScale:68,YScale:1,width:15,height:94},{XScale:86,YScale:20,width:14,height:41}],CACTUS_THREE:[{XScale:1,YScale:24,width:14,height:38},{XScale:16,YScale:1,width:15,height:94},{XScale:34,YScale:18,width:30,height:46},{XScale:66,YScale:1,width:15,height:94},{XScale:88,YScale:10,width:26,height:50},{XScale:116,YScale:1,width:16,height:94},{XScale:136,YScale:20,width:14,height:46}],CACTUS_FOUR:[{XScale:1,YScale:24,width:14,height:38},{XScale:16,YScale:1,width:15,height:94},{XScale:34,YScale:18,width:30,height:46},{XScale:66,YScale:1,width:15,height:94},{XScale:88,YScale:10,width:26,height:50},{XScale:116,YScale:1,width:16,height:94},{XScale:136,YScale:20,width:14,height:46}],PTERODACTYL:[[{XScale:0,YScale:18,width:6,height:10},{XScale:8,YScale:8,width:8,height:20},{XScale:17,YScale:0,width:14,height:24},{XScale:31,YScale:18,width:16,height:48},{XScale:48,YScale:18,width:40,height:30}],[{XScale:0,YScale:36,width:6,height:10},{XScale:8,YScale:26,width:8,height:20},{XScale:17,YScale:20,width:10,height:24},{XScale:28,YScale:10,width:8,height:56},{XScale:36,YScale:10,width:10,height:56},{XScale:46,YScale:28,width:14,height:40},{XScale:61,YScale:44,width:30,height:20}]]};var e=["CACTUS_SINGLE","CACTUS_DOUBLE","CACTUS_THREE","CACTUS_FOUR","PTERODACTYL"],s=e[S(0,4)];this.sprite=t.kindSpriteMap[s][0],this.dimensions.height=this.sprite.HEIGHT,this.dimensions.width=this.sprite.WIDTH,this.isCactus=s.startsWith("CACTUS");var n=t.cactusVolumeList[Math.round(Math.random())];M.currentSpeed<10&&["CACTUS_FOUR","CACTUS_THREE"].includes(s)&&(n=.6),this.isCactus?(this.dimensions.height*=n,this.dimensions.width*=n,this.Y=M.config.CANVAS_HEIGHT-this.dimensions.height-t.config.FOOT_SINK):this.Y=S(t.config.MAX_SKY_LEVEL,t.config.MIN_SKY_LEVEL),this.gap=this.getGap(),this.gap>M.config.CANVAS_WIDTH&&(this.gap=M.config.CANVAS_WIDTH),this.collisionBoxs=this.setCollisionBoxs(s,n)}return Object(o["a"])(t,[{key:"draw",value:function(){this.canvasCtx.drawImage(C.image,this.sprite.X,this.sprite.Y,this.sprite.WIDTH,this.sprite.HEIGHT,this.X,this.Y,this.dimensions.width,this.dimensions.height)}},{key:"update",value:function(i){var e=this;this.isCactus||(this.cumulativeTime+=i,this.cumulativeTime-t.config.PTERODACTYL_FREQUENCY>0&&(this.cumulativeTime=0,this.currentSpriteIndex=this.currentSpriteIndex?0:1,this.sprite=t.kindSpriteMap["PTERODACTYL"][this.currentSpriteIndex],this.collisionBoxs=this.setCollisionBoxs("PTERODACTYL",1)));var s=this.X,n=this.Y,a=Math.floor(M.currentSpeed*(g.getFPS()/1e3)*i);this.isHide||(this.X-=a,this.draw(),this.collisionBoxs.forEach((function(t){return t.setPosition(t.X+e.X-s,t.Y+e.Y-n)})))}},{key:"setCollisionBoxs",value:function(t,i){var e=this,s="PTERODACTYL"===t?this.kindCollisionBoxMap[t][this.currentSpriteIndex]:this.kindCollisionBoxMap[t];return s.map((function(t){return new D(e.X+Math.ceil(t.XScale*i),e.Y+Math.ceil(t.YScale*i),Math.ceil(t.width*i),Math.ceil(t.height*i))}))}},{key:"getGap",value:function(){var i=t.config,e=i.CACUTS_MIN_GAD,s=i.PTERODACTYL_MIN_GAD,n=i.MIN_GAP_COEFFICIENT,a=i.MAX_GAP_COEFFICIENT,h=this.isCactus?e:s,r=Math.round(.5*this.dimensions.width*M.currentSpeed+h*n),c=Math.round(r*a);return S(r,c)}},{key:"isHide",get:function(){return this.X<-this.dimensions.width}}]),t}();N.kindSpriteMap={CACTUS_SINGLE:[{X:650,Y:2,WIDTH:52,HEIGHT:100}],CACTUS_DOUBLE:[{X:702,Y:2,WIDTH:100,HEIGHT:100}],CACTUS_THREE:[{X:650,Y:2,WIDTH:152,HEIGHT:100}],CACTUS_FOUR:[{X:802,Y:2,WIDTH:150,HEIGHT:100}],PTERODACTYL:[{X:260,Y:14,WIDTH:92,HEIGHT:68},{X:352,Y:2,WIDTH:92,HEIGHT:60}]},N.config={FOOT_SINK:20,MAX_SKY_LEVEL:0,MIN_SKY_LEVEL:120,MAX_GAP_COEFFICIENT:1.5,MIN_GAP_COEFFICIENT:.6,CACUTS_MIN_GAD:200,PTERODACTYL_MIN_GAD:250,PTERODACTYL_FREQUENCY:500},N.cactusVolumeList=[.6,1];e("3987");var w=function(){function t(i){var e=this;Object(c["a"])(this,t),this.canvasCtx=i,this.maxScoreUnits=5,this.cumulativeTime=0,this.isFlash=!1,this.alearyChangeTime=0,this.alearyFlashTime=0,this.X=M.config.CANVAS_WIDTH-2*t.config.NUMBER_WIDTH,this.Y=5,this.highScore=parseInt(localStorage.highScore)||0,A.$on("crashed",(function(){return e.contrastScore()}))}return Object(o["a"])(t,[{key:"init",value:function(){for(var t=0;t<this.maxScoreUnits;t++)this.draw(t,0);this.drawHighScore()}},{key:"draw",value:function(i,e){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1;s&&(n=this.maxScoreUnits+2);var a=t.sprite,h=t.config,r=a.X+e*h.NUMBER_WIDTH,c=this.X-(i+n)*h.NUMBER_WIDTH;this.canvasCtx.save(),this.canvasCtx.drawImage(C.image,r,t.sprite.Y,t.sprite.WIDTH,t.sprite.HEIGHT,c,this.Y,t.sprite.WIDTH,t.sprite.HEIGHT),this.canvasCtx.restore()}},{key:"update",value:function(i){var e=this,s=this.getActualDistance(i),n=t.currentMaxScore;t.currentMaxScore+=s;var a=!0,h=t.currentMaxScore;if(Math.floor(n/100)<Math.floor(t.currentMaxScore/100)&&(this.isFlash=!0),this.isFlash){a=!1,this.alearyFlashTime+=i,this.alearyFlashTime>t.config.FLASH_TIME&&(this.isFlash=!1,this.alearyFlashTime=0),this.alearyChangeTime+=i;var r=t.config.FLAGH_FREQUENCY;this.alearyChangeTime>2*r?this.alearyChangeTime=0:this.alearyChangeTime>r&&(a=!0,h=100*Math.floor(t.currentMaxScore/100))}var c=String(h).split("");this.complementZeroByMaxUnit(c),a&&c.forEach((function(t,i){return e.draw(c.length-1-i,Number(t))})),this.drawHighScore()}},{key:"drawHighScore",value:function(){var t=this;this.canvasCtx.globalAlpha=.6;var i=String(this.highScore).split("");this.complementZeroByMaxUnit(i),i.unshift.apply(i,["10","11","12"]),i.forEach((function(e,s){return t.draw(i.length-1-s,Number(e),!0)})),this.canvasCtx.globalAlpha=1}},{key:"contrastScore",value:function(){t.currentMaxScore>this.highScore&&(this.highScore=t.currentMaxScore,localStorage.highScore=this.highScore)}},{key:"reSet",value:function(){t.currentMaxScore=0,this.init()}},{key:"getActualDistance",value:function(t){this.cumulativeTime+=t;var i=Math.round(M.currentSpeed/1500*this.cumulativeTime);return i&&(this.cumulativeTime=0),i}},{key:"complementZeroByMaxUnit",value:function(t){while(t.length<this.maxScoreUnits)t.unshift("0")}}]),t}();w.sprite={X:1294,Y:2,WIDTH:18,HEIGHT:22},w.numberSpriteDistance=20,w.wordsSprite={X:1514,Y:2,WIDTH:20,HEIGHT:18},w.config={NUMBER_WIDTH:20,FLASH_TIME:2e3,FLAGH_FREQUENCY:400},w.currentMaxScore=0;var L=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.starList=[],this.astralSpeed=M.config.CANVAS_WIDTH/t.config.ALTERNATE_TIME,this.cloudList=[],this.obstacleList=[],this.ground=new E(this.canvasCtx),this.moon=new _(this.canvasCtx),A.$on("alternate",(function(i){return t.isNight=i}))}return Object(o["a"])(t,[{key:"init",value:function(){t.isNight&&(this.generateStarList(),this.moon.update(0,0))}},{key:"update",value:function(t){this.ground.update(t),this.updateMoonAndStar(t),this.updateCloudList(t),w.currentMaxScore>30&&this.updateObstacleList(t)}},{key:"updateMoonAndStar",value:function(t){var i=this.astralSpeed*t;this.updateStarList(i),this.moon.update(t,i)}},{key:"updateStarList",value:function(i){this.starList.forEach((function(t){return t.update(i)})),this.starList.length||this.addCould();var e=this.starList.length,s=t.config.MAX_STAR,n=this.starList[e-1]||{X:0};Math.random()<.5&&n.X<M.config.CANVAS_WIDTH-Y.config.MIN_GAD&&e<s&&this.starList.push(new Y(this.canvasCtx)),this.starList=this.starList.filter((function(t){return!t.isHide}))}},{key:"updateObstacleList",value:function(t){this.obstacleList.forEach((function(i){return i.update(t)})),this.obstacleList.length||this.obstacleList.push(new N(this.canvasCtx));var i=this.obstacleList.length,e=this.obstacleList[i-1],s=M.config.CANVAS_WIDTH;s-e.X>e.gap&&Math.random()>.9&&this.obstacleList.push(new N(this.canvasCtx)),this.obstacleList=this.obstacleList.filter((function(t){return!t.isHide}))}},{key:"updateCloudList",value:function(i){var e=t.config.BG_CLOUD_SPEED/1e3*i*M.currentSpeed;this.cloudList.forEach((function(t){return t.update(e)})),this.cloudList.length||this.addCould();var s=this.cloudList.length,n=this.cloudList[s-1],a=M.config.CANVAS_WIDTH,h=t.config,r=h.MAX_CLOUDS,c=h.CLOUD_FREQUENCY;a-n.X>=n.cloudGap&&c>Math.random()&&s<r&&this.addCould(),this.cloudList=this.cloudList.filter((function(t){return!t.isHide}))}},{key:"generateStarList",value:function(){var i=this.starList.length;while(i<t.config.MAX_STAR){var e=S(0,M.config.CANVAS_WIDTH);Math.random()<.5&&this.starList.push(new Y(this.canvasCtx,e)),i++}}},{key:"addCould",value:function(){this.cloudList.push(new m(this.canvasCtx))}},{key:"reSet",value:function(){this.obstacleList=[],this.starList=[],this.init()}}]),t}();L.config={ALTERNATE_TIME:3e4,BG_CLOUD_SPEED:1,BUMPY_THRESHOLD:.3,CLOUD_FREQUENCY:.5,MAX_STAR:8,MAX_CLOUDS:6},L.isNight=!0;var x=e("3627"),X=e.n(x),y=function(){function t(i){Object(c["a"])(this,t),this.canvasCtx=i,this.currentBehaviorIndex=0,this.baseY=M.config.CANVAS_HEIGHT-t.sprite.HEIGHT-t.config.FOOTSINK,this.X=30,this.Y=this.baseY,this.behaviorCollsionBoxMap={WAITING:[new D(32,220,20,28),new D(50,220,34,56),new D(84,220,10,30),new D(95,220,4,16),new D(72,190,42,30)],RUNNING:[new D(32,220,20,28),new D(50,220,34,56),new D(84,220,10,30),new D(95,220,4,16),new D(72,190,42,30)],JUMPING:[new D(32,220,20,28),new D(50,220,34,56),new D(84,220,10,30),new D(95,220,4,16),new D(72,190,42,30)],DUCKING:[new D(32,224,20,26),new D(53,226,22,50),new D(76,230,24,38),new D(100,230,40,26)],CRASHED:[new D(32,220,20,28),new D(50,220,34,56),new D(84,220,10,30),new D(95,220,4,16),new D(72,190,42,30)]},this.cumulativeTime=0,this.status="WAITING",this.blinkTimeout=0,this.blinkDelay=0,this.isWaitBlik=!1,this.jumpCount=0,this.jumpLimitY=this.baseY-t.config.MAX_JUMP_HEIGHT,this.jumpVelocity=t.config.INIITAL_JUMP_VELOCITY-M.currentSpeed/10,this.landing=!1,this.speedDrop=!1,this.Y=this.baseY,this.collisionBoxs=X()(this.behaviorCollsionBoxMap.WAITING),this.draw()}return Object(o["a"])(t,[{key:"update",value:function(t){var i=this,e=this.X,s=this.Y,n=this.status;this.cumulativeTime+=t;var a={WAITING:function(){return i.startWait()},JUMPING:function(){return i.updateJump(t)},RUNNING:function(){return i.updateRunAndDuck()},DUCKING:function(){return i.updateRunAndDuck()},CRASHED:function(){return i.updateCrashed()}};a[this.status](),this.draw();var h=this.X-e,r=this.Y-s;n!==this.status&&(h=r=0,this.collisionBoxs=X()(this.behaviorCollsionBoxMap[this.status])),this.collisionBoxs.forEach((function(t){t.setPosition(t.X+h,t.Y+r)}))}},{key:"draw",value:function(){var i=t.behavior[this.status][this.currentBehaviorIndex],e=i.X,s=i.Y,n=t.sprite.WIDTH,a=t.sprite.HEIGHT;"DUCKING"===this.status&&(n=t.config.WIDTH_DUCK,a=t.config.HEIGHT_DUCK),this.canvasCtx.drawImage(C.image,e,s,n,a,this.X,this.Y,n,a)}},{key:"updateRunAndDuck",value:function(){this.cumulativeTime>=this.currentFrameStamp&&(this.currentBehaviorIndex=1^this.currentBehaviorIndex,this.cumulativeTime=0)}},{key:"updateJump",value:function(i){this.currentBehaviorIndex=0;var e=i/this.currentFrameStamp,s=t.config.SPEED_DROP_COEFFICIENT,n=this.jumpVelocity*e;this.speedDrop&&(n=Math.abs(n*s)),(this.Y<=this.jumpLimitY||this.speedDrop)&&(this.landing=!0),this.Y+=Math.round(n),this.jumpVelocity+=t.config.GRAVITY*e,this.landing&&this.Y>=this.baseY&&(this.landing=!1,this.status=this.speedDrop?"DUCKING":"RUNNING",this.cumulativeTime=0,this.Y=this.baseY,this.speedDrop&&(this.Y+=28))}},{key:"updateCrashed",value:function(){this.currentBehaviorIndex=0}},{key:"startWait",value:function(){var i=this;this.isWaitBlik=!0,this.blinkDelay=Math.ceil(Math.random()*t.config.BLINK_TIMING),this.blinkTimeout=setTimeout((function(){"WAITING"===i.status?(i.currentBehaviorIndex=1,i.draw(),setTimeout((function(){i.isWaitBlik=!1,i.currentBehaviorIndex=0,i.draw(),i.startWait()}),200)):clearTimeout(i.blinkTimeout)}),this.blinkDelay)}},{key:"startJump",value:function(){this.status="JUMPING",this.jumpVelocity=t.config.INIITAL_JUMP_VELOCITY-.7,this.speedDrop=!1}},{key:"startDuck",value:function(){this.status="DUCKING",this.Y=this.baseY+28}},{key:"endDuck",value:function(){this.status="RUNNING",this.Y=this.baseY}},{key:"reSet",value:function(){this.status="RUNNING",this.Y=this.baseY}},{key:"currentFrameStamp",get:function(){return t.behaviorFrameStamp[this.status]}}]),t}();y.sprite={X:1942,Y:2,WIDTH:88,HEIGHT:94},y.config={HEIGHT_DUCK:60,WIDTH_DUCK:118,FOOTSINK:20,MAX_JUMP_HEIGHT:60,MIN_JUMP_HEIGHT:60,INIITAL_JUMP_VELOCITY:-20,SPEED_DROP_COEFFICIENT:3,GRAVITY:1.2,BLINK_TIMING:7e3},y.behavior={WAITING:[{X:1678,Y:2},{X:1766,Y:2}],RUNNING:[{X:1854,Y:2},{X:1942,Y:2}],JUMPING:[{X:1678,Y:2}],DUCKING:[{X:2206,Y:36},{X:2324,Y:36}],CRASHED:[{X:2030,Y:2}]},y.behaviorFrameStamp={WAITING:1e3/3,DUCKING:125,RUNNING:1e3/12,JUMPING:1e3/60,CRASHED:1e3/60};var G=function(){function t(){Object(c["a"])(this,t)}return Object(o["a"])(t,[{key:"detectCollision",value:function(t,i){t.X+t.WIDTH>=i.X&&t.X<=i.X+i.WIDTH&&t.Y+t.HEIGHT>=i.Y&&t.Y<=i.Y+i.HEIGHT&&A.$emit("crashed")}},{key:"detectCollisionList",value:function(t,i){var e=this;t.forEach((function(t){i.forEach((function(i){e.detectCollision(t,i)}))}))}},{key:"gameOver",value:function(i){var e=M.config,s=e.CANVAS_WIDTH,n=e.CANVAS_HEIGHT,a=t.textSprite,h=t.buttonSprite;i.drawImage(C.image,a.X,a.Y,a.WIDTH,a.HEIGHT,s/2-a.WIDTH/2,n/2-a.HEIGHT/2-h.WIDTH,a.WIDTH,a.HEIGHT),i.drawImage(C.image,h.X,h.Y,t.buttonSprite.WIDTH,t.buttonSprite.HEIGHT,s/2-h.WIDTH/2,n/2-a.HEIGHT/2,h.WIDTH,h.HEIGHT)}}]),t}();G.textSprite={X:1294,Y:26,WIDTH:384,HEIGHT:24},G.buttonSprite={X:2,Y:2,WIDTH:72,HEIGHT:64};var M=function(){function t(i,e){Object(c["a"])(this,t),this.canvasCtx=i,this.consumeTime=0,this.status="WAITING",this.reqFrameId=0,t.config=Object(p["a"])(Object(p["a"])({},t.config),e),this.stage=new L(this.canvasCtx),this.tRex=new y(this.canvasCtx),this.distanceMeter=new w(this.canvasCtx),this.rule=new G,this.init()}return Object(o["a"])(t,[{key:"init",value:function(){this.setSpeed(t.config.INIT_SPEED),A.$emit("resize"),this.startListening(),this.stage.ground.init(),this.tRex.startWait()}},{key:"update",value:function(){var i=this,e=v(),s=e-(this.consumeTime||e);if(this.consumeTime=e,"CRASHED"!==this.status&&this.clearCanvas(),"BOOTING"===this.status&&("RUNNING"===this.tRex.status?(this.stage.ground.gameBoot(),this.stage.ground.animationWidth>=t.config.CANVAS_WIDTH&&(this.stage.init(),this.distanceMeter.init(),this.status="PLAYING",A.$emit("resize"))):this.stage.ground.init()),"PLAYING"===this.status){this.stage.update(s),this.distanceMeter.update(s);var n=s/1e4*2;n>24&&(n=24),t.currentSpeed+=n;var a=this.stage.obstacleList.find((function(t){return t.X+t.dimensions.width>i.tRex.X}));a&&this.rule.detectCollisionList(this.tRex.collisionBoxs,a.collisionBoxs)}this.tRex.update(s),"CRASHED"!==this.status&&this.scheduleNextUpdate()}},{key:"scheduleNextUpdate",value:function(){this.reqFrameId=requestAnimationFrame(this.update.bind(this))}},{key:"clearCanvas",value:function(){var i=t.config,e=i.CANVAS_WIDTH,s=i.CANVAS_HEIGHT;this.canvasCtx.clearRect(0,0,e,s)}},{key:"setSpeed",value:function(i){i&&(t.currentSpeed=i)}},{key:"onCrashed",value:function(){this.status="CRASHED",this.tRex.status="CRASHED",cancelAnimationFrame(this.reqFrameId),this.scheduleNextUpdate(),this.rule.gameOver(this.canvasCtx)}},{key:"reSet",value:function(){this.clearCanvas(),this.setSpeed(t.config.INIT_SPEED),this.status="PLAYING",this.consumeTime=0,this.tRex.reSet(),this.stage.reSet(),this.distanceMeter.reSet(),this.scheduleNextUpdate()}},{key:"onClick",value:function(){"CRASHED"===this.status&&this.reSet()}},{key:"onkeydown",value:function(t){[87,38,32].includes(t.keyCode)&&("WAITING"===this.status&&(this.status="BOOTING",this.scheduleNextUpdate()),"JUMPING"!==this.tRex.status&&this.tRex.startJump()),[83,40].includes(t.keyCode)&&("JUMPING"===this.tRex.status?this.tRex.speedDrop=!0:["RUNNING","DUCKING"].includes(this.tRex.status)&&this.tRex.startDuck())}},{key:"onkeyup",value:function(t){[83,40].includes(t.keyCode)&&("JUMPING"===this.tRex.status?this.tRex.speedDrop=!1:["RUNNING","DUCKING"].includes(this.tRex.status)&&this.tRex.endDuck())}},{key:"startListening",value:function(){var t=this;document.onclick=function(){return t.onClick()},document.onkeydown=function(i){return t.onkeydown(i)},document.onkeyup=function(i){return t.onkeyup(i)},A.$on("crashed",(function(){return t.onCrashed()}))}}]),t}();M.config={CANVAS_WIDTH:1200,CANVAS_HEIGHT:300,PLAYER_COUNT:1,INIT_SPEED:7,LIMIT_SPEED:30},M.currentSpeed=M.config.INIT_SPEED;var b=function(t){Object(u["a"])(e,t);var i=Object(l["a"])(e);function e(){var t;return Object(c["a"])(this,e),t=i.apply(this,arguments),t.magnification=1,t.config={CANVAS_WIDTH:1200,CANVAS_HEIGHT:300},t}return Object(o["a"])(e,[{key:"gameCanvasStyle",get:function(){return{transform:"scale(".concat(this.magnification,")")}}},{key:"gameCtx",get:function(){return this.gameRef.getContext("2d")}},{key:"status",get:function(){var t;return null===(t=this.game)||void 0===t?void 0:t.status}},{key:"onResize",value:function(){this.magnification=window.innerWidth/600}},{key:"onUpdateBackground",value:function(t){document.documentElement.style.setProperty("--bg-color",t?"#000":"#fff")}},{key:"start",value:function(){this.game=new M(this.gameCtx,this.config),this.setListener()}},{key:"setListener",value:function(){var t=this;A.$on("resize",(function(){return t.onResize()})),window.onresize=function(){return t.onResize()};var i=window.matchMedia("(prefers-color-scheme:dark)");i.onchange=function(t){return A.$emit("alternate",t.matches)},A.$on("alternate",(function(i){return t.onUpdateBackground(i)})),A.$emit("alternate",i.matches)}},{key:"mounted",value:function(){var t=Object(r["a"])(Object(h["a"])().mark((function t(){return Object(h["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new C;case 2:this.start();case 3:case"end":return t.stop()}}),t,this)})));function i(){return t.apply(this,arguments)}return i}()}]),e}(f["c"]);Object(d["a"])([Object(f["b"])()],b.prototype,"gameRef",void 0),b=Object(d["a"])([f["a"]],b);var k=b,O=k,W=(e("bd35"),e("a0a1")),U=Object(W["a"])(O,n,a,!1,null,null,null),P=U.exports,R=e("2a89");Object(R["a"])("".concat("","service-worker.js"),{ready:function(){},registered:function(){},cached:function(){},updatefound:function(){},updated:function(){},offline:function(){},error:function(t){}}),s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(P)}}).$mount("#app")}});
//# sourceMappingURL=app.61fe7d4e.js.map